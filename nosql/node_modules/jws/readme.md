---
ms.openlocfilehash: 4d20fe9ebd12ad861676f14f1c8e66479fd1e481
ms.sourcegitcommit: e739004291428ce83f14b9d49f1e9dfaa3762dde
ms.translationtype: HT
ms.contentlocale: ko-KR
ms.lasthandoff: 02/05/2022
ms.locfileid: "138052082"
---
# <a name="node-jws-build-statushttptravis-ciorgbrianloveswordsnode-jws"></a>node-jws [![빌드 상태](https://secure.travis-ci.org/brianloveswords/node-jws.svg)](http://travis-ci.org/brianloveswords/node-jws)

[JSON 웹 서명](http://self-issued.info/docs/draft-ietf-jose-json-web-signature.html)을 구현합니다.

`draft-ietf-jose-json-web-signature-08`에 대해 개발되고 X.509 인증서 체인 서명/확인(패치 시작)을 **제외한** 전체 사양을 구현합니다.

동기(`jws.sign`, `jws.verify`) 및 스트리밍(`jws.createSign`, `jws.createVerify`) API가 모두 있습니다.

# <a name="install"></a>설치

```bash
$ npm install jws
```

# <a name="usage"></a>사용량

## <a name="jwsalgorithms"></a>jws.ALGORITHMS

지원되는 알고리즘 배열 현재 지원되는 알고리즘은 다음과 같습니다.

alg 매개 변수 값 | 디지털 서명 또는 MAC 알고리즘
----------------|----------------------------
HS256 | SHA-256 해시 알고리즘을 사용하는 HMAC
HS384 | SHA-384 해시 알고리즘을 사용하는 HMAC
HS512 | SHA-512 해시 알고리즘을 사용하는 HMAC
RS256 | SHA-256 해시 알고리즘을 사용하는 RSASSA
RS384 | SHA-384 해시 알고리즘을 사용하는 RSASSA
RS512 | SHA-512 해시 알고리즘을 사용하는 RSASSA
PS256 | SHA-256 해시 알고리즘을 사용하는 RSASSA-PSS
PS384 | SHA-384 해시 알고리즘을 사용하는 RSASSA-PSS
PS512 | SHA-512 해시 알고리즘을 사용하는 RSASSA-PSS
ES256 | P-256 곡선 및 SHA-256 해시 알고리즘을 사용하는 ECDSA
ES384 | P-384 곡선 및 SHA-384 해시 알고리즘을 사용하는 ECDSA
ES512 | P-521 곡선 및 SHA-512 해시 알고리즘을 사용하는 ECDSA
없음 | 디지털 서명 또는 MAC 값이 포함되지 않음

## <a name="jwssignoptions"></a>jws.sign(options)

(동기) 헤더 및 페이로드에 대한 JSON 웹 서명을 반환합니다.

옵션:

* `header`
* `payload`
* `secret` 또는 `privateKey`
* `encoding`(선택 사항이며, 기본값은 ‘utf8’)

`header`는 `alg` 속성이 있는 개체여야 합니다. `header.alg`는 `jws.ALGORITHMS`에 있는 값 중 하나여야 합니다. 지원되는 알고리즘의 표는 위의 내용을 참조하세요.

`payload`가 버퍼 또는 문자열이 아닌 경우 `JSON.stringify`를 사용하여 문자열로 강제 변환됩니다.

예

```js
const signature = jws.sign({
  header: { alg: 'HS256' },
  payload: 'h. jon benjamin',
  secret: 'has a van',
});
```

## <a name="jwsverifysignature-algorithm-secretorkey"></a>jws.verify(signature, algorithm, secretOrKey)

(동기) 서명이 비밀 또는 키와 일치하는지 여부의 경우 `true` 또는 `false`를 반환합니다.

`signature`는 JWS 서명입니다. `header.alg`는 `jws.ALGORITHMS`에 있는 값 중 하나여야 합니다.
지원되는 알고리즘의 표는 위의 내용을 참조하세요. `secretOrKey`는 HMAC 알고리즘의 비밀 또는 RSA 및 ECDSA에 대한 PEM 인코딩 공개 키를 포함하는 문자열 또는 버퍼입니다.

서명 헤더의 `"alg"` 값은 무시됩니다.


## <a name="jwsdecodesignature"></a>jws.decode(signature)

(동기) JWS 서명의 디코딩된 헤더, 디코딩된 페이로드 및 서명 부분을 반환합니다.

세 가지 속성이 있는 개체 반환(예:
```js
{ header: { alg: 'HS256' },
  payload: 'h. jon benjamin',
  signature: 'YOWPewyGHKu4Y_0M_vtlEnNlqmFOclqp4Hy6hVHfFT4'
}
```

## <a name="jwscreatesignoptions"></a>jws.createSign(options))

새 SignStream 개체를 반환합니다.

옵션:

* `header`(필수)
* `payload`
* `key` || `privateKey` || `secret`
* `encoding`(선택 사항이며, 기본값은 ‘utf8’)

`header`를 제외하고, 모든 옵션은 값이 미리 알려진 경우 문자열 또는 버퍼를 예상하거나 편의를 위해 스트림을 예상합니다.
`key`/`privateKey`/`secret`은 암호화된 프라이빗 키를 사용할 때 개체일 수도 있습니다. [암호화 설명서][encrypted-key-docs]를 참조하세요.

예제:

```js

// This...
jws.createSign({
  header: { alg: 'RS256' },
  privateKey: privateKeyStream,
  payload: payloadStream,
}).on('done', function(signature) {
  // ...
});

// is equivalent to this:
const signer = jws.createSign({
  header: { alg: 'RS256' },
});
privateKeyStream.pipe(signer.privateKey);
payloadStream.pipe(signer.payload);
signer.on('done', function(signature) {
  // ...
});
```

## <a name="jwscreateverifyoptions"></a>jws.createVerify(options)

새 VerifyStream 개체를 반환합니다.

옵션:

* `signature`
* `algorithm`
* `key` || `publicKey` || `secret`
* `encoding`(선택 사항이며, 기본값은 ‘utf8’)

모든 옵션은 값이 미리 알려진 경우 문자열 또는 버퍼를 예상하거나 편의를 위해 스트림을 예상합니다.

예제:

```js

// This...
jws.createVerify({
  publicKey: pubKeyStream,
  signature: sigStream,
}).on('done', function(verified, obj) {
  // ...
});

// is equivilant to this:
const verifier = jws.createVerify();
pubKeyStream.pipe(verifier.publicKey);
sigStream.pipe(verifier.signature);
verifier.on('done', function(verified, obj) {
  // ...
});
```

## <a name="class-signstream"></a>클래스: SignStream

완료 시 단일 데이터 이벤트(계산된 서명)를 내보내는 `Readable Stream`입니다.

### <a name="event-done"></a>이벤트: ‘완료’
`function (signature) { }`

### <a name="signerpayload"></a>signer.payload

JWS 페이로드가 예상되는 `Writable Stream`입니다. 생성자에 `payload` 옵션을 전달한 경우에는 사용하지 마세요.

예:

```js
payloadStream.pipe(signer.payload);
```

### <a name="signersecretbrsignerkeybrsignerprivatekey"></a>signer.secret<br>signer.key<br>signer.privateKey

`Writable Stream`. HMAC에 대한 JWS 비밀 또는 ECDSA 및 RSA에 대한 privateKey가 필요합니다. 생성자에 `secret` 또는 `key` 옵션을 전달한 경우에는 사용하지 마세요.

예:

```js
privateKeyStream.pipe(signer.privateKey);
```

## <a name="class-verifystream"></a>클래스: VerifyStream

이는 단일 데이터 이벤트를 내보내는 `Readable Stream`으로, 해당 서명이 유효한지 여부의 결과입니다.

### <a name="event-done"></a>이벤트: ‘완료’
`function (valid, obj) { }`

`valid`는 서명이 유효한지 여부에 대한 부울입니다.

### <a name="verifiersignature"></a>verifier.signature

JWS 서명이 예상되는 `Writable Stream`입니다. 생성자에 `signature` 옵션을 전달한 경우에는 사용하지 마세요.

### <a name="verifiersecretbrverifierkeybrverifierpublickey"></a>verifier.secret<br>verifier.key<br>verifier.publicKey

공개 키 또는 비밀을 예상하는 `Writable Stream`입니다. 생성자에 `key` 또는 `secret` 옵션을 전달한 경우에는 사용하지 마세요.

# <a name="todo"></a>TODO

* 매번 `{ alg: 'ES512' }` 헤더 개체를 정의하지 않고 알고리즘을 정의하기 위한 몇 가지 편리한 옵션/API가 있어야 하는 것 같습니다.

* X.509 지원, ugh

# <a name="license"></a>License

MIT

```
Copyright (c) 2013-2015 Brian J. Brennan

Permission is hereby granted, free of charge, to any person obtaining a
copy of this software and associated documentation files (the
"Software"), to deal in the Software without restriction, including
without limitation the rights to use, copy, modify, merge, publish,
distribute, sublicense, and/or sell copies of the Software, and to
permit persons to whom the Software is furnished to do so, subject to
the following conditions:

The above copyright notice and this permission notice shall be included
in all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
```

[encrypted-key-docs]: https://nodejs.org/api/crypto.html#crypto_sign_sign_private_key_output_format
