---
ms.openlocfilehash: ca1f677bd38876befee833fcedd10388a71aecf4
ms.sourcegitcommit: e739004291428ce83f14b9d49f1e9dfaa3762dde
ms.translationtype: HT
ms.contentlocale: ko-KR
ms.lasthandoff: 02/05/2022
ms.locfileid: "138053110"
---
<a name="agent-base"></a>agent-base
==========
### <a name="turn-a-function-into-an-httpagenthttpagent-instance"></a>함수를 [`http.Agent`][http.Agent] 인스턴스로 변환
[![빌드 상태](https://github.com/TooTallNate/node-agent-base/workflows/Node%20CI/badge.svg)](https://github.com/TooTallNate/node-agent-base/actions?workflow=Node+CI)

이 모듈은 `http.Agent` 생성기를 제공합니다. 즉, 비동기 콜백 함수를 전달하고 아웃바운드 HTTP 요청을 보낼 때 지정된 콜백 함수를 호출하는 새 `http.Agent` 인스턴스를 반환합니다.

#### <a name="some-subclasses"></a>일부 서브클래스는 다음과 같습니다.

다음은 `agent-base`의 몇 가지 흥미로운 용도입니다.
끌어오기 요청을 보내서 나열하세요!

 * [`http-proxy-agent`][http-proxy-agent]: HTTP 엔드포인트에 대한 HTTP 프록시 `http.Agent` 구현
 * [`https-proxy-agent`][https-proxy-agent]: HTTP 엔드포인트에 대한 HTTP 프록시 `http.Agent` 구현
 * [`pac-proxy-agent`][pac-proxy-agent]: HTTP 및 HTTPS에 대한 PAC 파일 프록시 `http.Agent` 구현
 * [`socks-proxy-agent`][socks-proxy-agent]: HTTP 및 HTTPS에 대한 SOCKS 프록시 `http.Agent` 구현


<a name="installation"></a>설치
------------

`npm`을 사용하여 다음을 설치합니다.

``` bash
$ npm install agent-base
```


<a name="example"></a>예
-------

다음은 모든 HTTP 요청에 대해 서버에 대한 새 `net.Socket` 연결을 만드는 최소 예제입니다(예: `agent: false` 옵션과 동일).

```js
var net = require('net');
var tls = require('tls');
var url = require('url');
var http = require('http');
var agent = require('agent-base');

var endpoint = 'http://nodejs.org/api/';
var parsed = url.parse(endpoint);

// This is the important part!
parsed.agent = agent(function (req, opts) {
  var socket;
  // `secureEndpoint` is true when using the https module
  if (opts.secureEndpoint) {
    socket = tls.connect(opts);
  } else {
    socket = net.connect(opts);
  }
  return socket;
});

// Everything else works just like normal...
http.get(parsed, function (res) {
  console.log('"response" event!', res.headers);
  res.pipe(process.stdout);
});
```

프라미스를 반환하거나 `async` 함수를 사용하는 것도 지원됩니다.

```js
agent(async function (req, opts) {
  await sleep(1000);
  // etc…
});
```

다른 `http.Agent` 인스턴스를 반환하여 해당 HTTP 요청에 대한 책임을 해당 에이전트에 “전달”합니다.

```js
agent(function (req, opts) {
  return opts.secureEndpoint ? https.globalAgent : http.globalAgent;
});
```


<a name="api"></a>API
---

## <a name="agentfunction-callback-object-options--httpagent"></a>에이전트(함수 콜백[, 개체 옵션]) → [http.Agent][]

`agent`로 사용되는 모든 HTTP 요청에 대해 콜백 함수 `callback`을 실행할 베이스 `http.Agent`를 만듭니다. 콜백 함수는 HTTP 요청에서 기본 소켓으로 사용될 일종의 `stream.Duplex` 인스턴스를 만드는 역할을 합니다.

`options` 개체는 다음 속성을 허용합니다.

  * `timeout` - 숫자 - `callback()` 함수의 시간 제한(밀리초)입니다. 기본값은 무한대(선택 사항)입니다.

콜백 함수에는 다음 서명이 있어야 합니다.

### <a name="callbackhttpclientrequest-req-object-options-function-cb--undefined"></a>콜백(http.ClientRequest req, 개체 옵션, 함수 cb) → 정의되지 않음

ClientRequest `req`에 액세스하여 요청 헤더 및 경로 등을 읽을 수 있습니다. `options` 개체에는 `http.request()`/`https.request()` 함수 호출에 전달된 옵션이 포함되어 있으며 `net.connect()`/`tls.connect()`에 직접 전달되도록 형식이 지정되어 있거나 그렇지 않으면 소켓을 만들려고 합니다. 생성된 소켓을 콜백 함수 `cb`에 전달하면 HTTP 요청이 계속 진행됩니다.

`https` 모듈을 사용하여 HTTP 요청을 호출하면 `options` _의 `secureEndpoint` 속성이 `true`_ 로 설정됩니다.


<a name="license"></a>License
-------

(MIT 라이선스)

Copyright (c) 2013 Nathan Rajlich &lt;nathan@tootallnate.net&gt;

이에 본 소프트웨어 및 관련 문서 파일(이하 ‘소프트웨어’)의 사본을 획득한 모든 사람에게 무료로 소프트웨어의 사용, 복사, 수정, 병합, 게시, 배포, 라이선스 양도 및/또는 소프트웨어 복사본 판매 권한을 포함하여 제한 없이 소프트웨어를 취급할 수 있는 권한을 부여하고, 다음과 같은 조건에 따라 소프트웨어를 제공받는 사람에게 이를 허용합니다.

위의 저작권 알림 및 이 권한은 소프트웨어의 모든 사본 또는 중요한 부분에 포함되어야 합니다.

이 소프트웨어는 상품성, 특정한 목적을 위한 적합성, 비침해에 관한 보증을 포함하되 이에 제한하지 않고 명시적 또는 묵시적인 어떠한 보증도 없이 ‘그대로’ 제공됩니다.
어떤 경우에도 작성자 또는 저작권 소유자는 계약상 행위, 불법 또는 그 밖의 문제로 인한 것인지와 관계없이, 본 소프트웨어나 소프트웨어의 사용 또는 기타 거래로 인해 발생하는 손해 배상, 손해 또는 기타 문제에 대한 책임을 지지 않습니다.

[http-proxy-agent]: https://github.com/TooTallNate/node-http-proxy-agent
[https-proxy-agent]: https://github.com/TooTallNate/node-https-proxy-agent
[pac-proxy-agent]: https://github.com/TooTallNate/node-pac-proxy-agent
[socks-proxy-agent]: https://github.com/TooTallNate/node-socks-proxy-agent
[http.Agent]: https://nodejs.org/api/http.html#http_class_http_agent
