---
ms.openlocfilehash: 0e4384a6edea7b3a580ffa5b32236b7f8b251834
ms.sourcegitcommit: e739004291428ce83f14b9d49f1e9dfaa3762dde
ms.translationtype: HT
ms.contentlocale: ko-KR
ms.lasthandoff: 02/05/2022
ms.locfileid: "138052337"
---
# <a name="combined-stream"></a>combined-stream

다른 여러 스트림을 하나씩 내보내는 스트림입니다.

**NB** 현재 `combined-stream`은 스트림 버전 1에서만 작동합니다. 이 라이브러리를 스트림 버전 2로 전환하기 위한 지속적인 노력이 있습니다. 어떤 도움도 환영합니다. :) 한편 `combined-stream`과의 호환성이 다소 있는 stream2 지원을 제공하는 다른 라이브러리를 탐색할 수 있습니다.

- [combined-stream2](https://www.npmjs.com/package/combined-stream2): 결합된 스트림 모듈에 대한 드롭인 streams2 호환 대체품입니다.

- [multistream](https://www.npmjs.com/package/multistream): 다른 여러 스트림을 하나씩 내보내는 스트림입니다.

## <a name="installation"></a>설치

``` bash
npm install combined-stream
```

## <a name="usage"></a>사용량

다음은 결합 스트림을 사용하여 두 파일을 하나로 결합하는 방법을 보여 주는 간단한 예제입니다.

``` javascript
var CombinedStream = require('combined-stream');
var fs = require('fs');

var combinedStream = CombinedStream.create();
combinedStream.append(fs.createReadStream('file1.txt'));
combinedStream.append(fs.createReadStream('file2.txt'));

combinedStream.pipe(fs.createWriteStream('combined.txt'));
```

위의 예제는 정상적으로 작동하지만 필요할 때까지 모든 원본 스트림을 일시 중지합니다. 이 작업을 수행하지 않으려면 `pauseStreams`을 `false`로 설정할 수 있습니다.

``` javascript
var CombinedStream = require('combined-stream');
var fs = require('fs');

var combinedStream = CombinedStream.create({pauseStreams: false});
combinedStream.append(fs.createReadStream('file1.txt'));
combinedStream.append(fs.createReadStream('file2.txt'));

combinedStream.pipe(fs.createWriteStream('combined.txt'));
```

그러나 아직 모든 원본 스트림이 없거나 리소스(파일 설명자, 메모리 등)를 즉시 할당하지 않으려면 어떻게 해야 할까요?
이 경우 `next()` 함수를 호출하여 스트림을 제공하는 콜백을 제공할 수 있습니다.

``` javascript
var CombinedStream = require('combined-stream');
var fs = require('fs');

var combinedStream = CombinedStream.create();
combinedStream.append(function(next) {
  next(fs.createReadStream('file1.txt'));
});
combinedStream.append(function(next) {
  next(fs.createReadStream('file2.txt'));
});

combinedStream.pipe(fs.createWriteStream('combined.txt'));
```

## <a name="api"></a>API

### <a name="combinedstreamcreateoptions"></a>CombinedStream.create([options])

결합된 새 스트림 개체를 반환합니다. 사용 가능한 옵션은 다음과 같습니다.

* `maxDataSize`
* `pauseStreams`

이러한 옵션의 효과는 아래에 설명되어 있습니다.

### <a name="combinedstreampausestreams--true"></a>combinedStream.pauseStreams = `true`

기본 스트림에 배압을 적용할지 여부입니다. `false`로 설정하면 기본 스트림이 일시 중지되지 않습니다. `true`로 설정하면 기본 스트림이 추가된 직후와 `delayedStream.pipe()`가 제한하려는 경우 일시 중지됩니다.

### <a name="combinedstreammaxdatasize--2--1024--1024"></a>combinedStream.maxDataSize = `2 * 1024 * 1024`

모든 원본 스트림에 대해 버퍼링할 최대 바이트(또는 문자)입니다.
이 값을 초과하면 `combinedStream`은 `'error'` 이벤트를 발생시킵니다.

### <a name="combinedstreamdatasize--0"></a>combinedStream.dataSize = `0`

현재 `combinedStream`에 의해 버퍼링된 바이트(또는 문자)의 양입니다.

### <a name="combinedstreamappendstream"></a>combinedStream.append(stream)

지정된 `stream`을 combinedStream 개체에 추가합니다. `pauseStreams`를 ‘true’로 설정하면 이 스트림도 즉시 일시 중지됩니다.

`streams`는 `next`라는 하나의 매개 변수를 사용하는 함수일 수도 있습니다. `next`는 `next` 스트림을 제공하기 위해 호출해야 하는 함수입니다. 위의 예제를 참조하세요.

`stream`이 추가되는 방식에 관계없이 combined-stream은 항상 `'error'` 리스너를 연결하므로 수동으로 연결할 필요가 없습니다.

특수한 경우: `stream`은 문자열 또는 버퍼일 수도 있습니다.

### <a name="combinedstreamwritedata"></a>combinedStream.write(data)

이것을 호출하면 안 됩니다. `combinedStream`은 추가된 스트림을 자체적으로 파이핑합니다.

### <a name="combinedstreamresume"></a>combinedStream.resume()

`combinedStream`이 관리하는 스트림을 드레이닝하기 시작합니다. 이 함수는 idempotent이며 일반적으로 현재 드레이닝되는 스트림으로 갈 때마다 `'resume'` 이벤트를 내보냅니다.

### <a name="combinedstreampause"></a>combinedStream.pause();

`combinedStream.pauseStreams`가 `false`로 설정되어 있으면 아무 작업도 수행하지 않습니다.
그렇지 않으면 `'pause'` 이벤트가 내보내지고, 현재 드레이닝 중인 스트림으로 이동하여 역압을 적용하는 데 사용할 수 있습니다.

### <a name="combinedstreamend"></a>combinedStream.end();

`combinedStream.writable`을 false로 설정하고, `'end'` 이벤트를 내보내고, 큐에서 모든 스트림을 제거합니다.

### <a name="combinedstreamdestroy"></a>combinedStream.destroy();

`'end'` 대신 `'close'` 이벤트를 내보내는 것을 제외하면 `combinedStream.end()`와 동일합니다.

## <a name="license"></a>License

combined-stream은 MIT 라이선스에 따라 라이선스가 부여됩니다.
