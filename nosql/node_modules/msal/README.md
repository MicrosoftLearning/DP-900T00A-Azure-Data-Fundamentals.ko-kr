---
ms.openlocfilehash: 4f36d4681facd228c63b48050973040e9785d30f
ms.sourcegitcommit: e739004291428ce83f14b9d49f1e9dfaa3762dde
ms.translationtype: HT
ms.contentlocale: ko-KR
ms.lasthandoff: 02/05/2022
ms.locfileid: "138052178"
---

<a name="microsoft-authentication-library-for-javascript-msaljs"></a>JavaScript용 Microsoft 인증 라이브러리(MSAL.js)
=========================================================

| [시작](https://docs.microsoft.com/azure/active-directory/develop/guidedsetups/active-directory-javascriptspa)| [AAD Docs](https://aka.ms/aaddevv2) | [라이브러리 참조](https://azuread.github.io/microsoft-authentication-library-for-js/ref/modules/_azure_msal.html) | [지원](README.md#community-help-and-support) | [샘플](https://github.com/AzureAD/microsoft-authentication-library-for-js/wiki/Samples)
| --- | --- | --- | --- | --- |

⚠️⚠️⚠️ 이 라이브러리는 더 이상 새 기능을 수신하지 않으며 중요한 버그 및 보안 수정 사항만 수신합니다. 모든 새 애플리케이션은 대신 [@azure/msal-browser](https://www.npmjs.com/package/@azure/msal-browser)를 사용해야 합니다. ⚠️⚠️⚠️

JavaScript용 MSAL을 사용하면 웹 브라우저에서 실행 중인 클라이언트 쪽 웹 애플리케이션이 [Azure AD B2C](https://docs.microsoft.com/azure/active-directory-b2c/active-directory-b2c-overview#identity-providers) 서비스를 통해 애플리케이션이 [Azure AD](https://docs.microsoft.com/azure/active-directory/develop/v2-overview) 회사 및 학교 계정(AAD), Microsoft 개인 계정(MSA), Facebook, Google, LinkedIn, Microsoft 계정 등과 같은 소셜 ID 제공자를 사용하여 사용자를 인증할 수 있습니다. 또한 앱이 [Microsoft Graph](https://graph.microsoft.io)와 같은 [Microsoft Cloud](https://www.microsoft.com/enterprise) 서비스에 액세스할 수 있는 토큰을 얻을 수 있습니다.

[![npm 버전](https://img.shields.io/npm/v/msal.svg?style=flat)](https://www.npmjs.com/package/msal)
[![npm 버전](https://img.shields.io/npm/dm/msal.svg)](https://nodei.co/npm/msal/)
[![codecov](https://codecov.io/gh/AzureAD/microsoft-authentication-library-for-js/branch/dev/graph/badge.svg?flag=msal-core)](https://codecov.io/gh/AzureAD/microsoft-authentication-library-for-js)

## <a name="installation"></a>설치

### <a name="via-npm"></a>NPM 사용:

    npm install msal

## <a name="via-cdn"></a>CDN 사용:

<!-- CDN_LATEST -->
```html
<script type="text/javascript" src="https://alcdn.msauth.net/lib/1.4.11/js/msal.min.js"></script>
```

CDN 사용에 대한 [자세한 내용과 모범 사례](https://github.com/AzureAD/microsoft-authentication-library-for-js/blob/dev/lib/msal-core/docs/cdn.md)는 설명서에서 확인할 수 있습니다.

## <a name="what-to-expect-from-this-library"></a>이 라이브러리에서 기대할 수 있는 내용
Javascript에 대한 Msal 지원은 라이브러리의 컬렉션입니다. `msal-core` 또는 단순히 `msal`은 프레임워크에 구애받지 않은 핵심 라이브러리입니다. 코어 1.x+가 안정화되면 최신 1.x 개선 사항으로 `msal-angular` 라이브러리를 가져올 예정입니다.  프레임워크 및 라이브러리의 사용량 추세에 따라 `msal-angularjs`에 대한 지원을 중단하여 Angular 1x 대신 Angular 2 이상 채택이 증가했음을 나타냅니다. 현재 라이브러리가 표준에 부합하면 `react` 및 `node.js`와 같은 새 플랫폼에서 새 기능 요청의 균형을 맞추기 시작합니다.

우리의 목표는 지역 사회와 의사 소통을 매우 잘하고 자신의 의견을 고려하는 것입니다. 패치가 필요한 만큼 자주 제공되는 월별 부 릴리스 일정으로 돌아가려고 합니다.  우리가 얻고자 하는 의사 소통, 계획 및 세분성 수준은 진행 중인 작업이 될 것입니다.

[로드맵](https://github.com/AzureAD/microsoft-authentication-library-for-js/wiki#roadmap)을 확인하여 현재 진행 중인 작업과 다음에 추적할 내용을 확인하세요.

## <a name="oauth-20-and-the-implicit-flow"></a>OAuth 2.0 및 암시적 Flow

Msal은 OAuth 2.0 프로토콜에 정의된 [암시적 허용 흐름](https://docs.microsoft.com/azure/active-directory/develop/v2-oauth2-implicit-grant-flow)을 구현하며 [OpenID](https://docs.microsoft.com/azure/active-directory/develop/v2-protocols-oidc) 규격입니다.

목표는 라이브러리가 플러그 앤 플레이 인증을 받을 수 있도록 프로토콜을 충분히 추상화하지만 보안 관점에서 암시적 흐름을 알고 이해하는 것이 중요합니다.
암시적 흐름은 클라이언트 비밀을 안전하게 관리할 수 없는 웹 브라우저의 컨텍스트에서 실행됩니다. 단일 페이지 앱에 최적화되어 있으며 클라이언트와 서버 간에 홉이 하나 적으므로 토큰이 브라우저에 직접 반환됩니다. 이러한 측면은 자연스럽게 덜 안전합니다.
이러한 보안 문제는 수명이 짧은 토큰 사용(따라서 새로 고침 토큰이 반환되지 않음), 앱에 대해 등록된 리디렉션 URI가 필요한 라이브러리, 요청 및 응답을 고유한 nonce 및 상태 매개 변수와 일치하는 라이브러리와 같은 표준 사례에 따라 완화됩니다.

## <a name="cache-storage"></a>캐시 스토리지

Msal, `localStorage` 및 `sessionStorage`에 대한 두 가지 스토리지 방법을 제공합니다.  사용자가 획득한 토큰을 저장하는 데 더 안전하므로 `sessionStorage`를 사용하는 것이 좋지만 `localStorage`에서 탭 및 사용자 세션에 걸쳐 Single Sign On을 제공합니다.  옵션을 탐색하고 애플리케이션에 가장 적합한 결정을 내릴 수 있습니다.

### <a name="forcerefresh-to-skip-cache"></a>forceRefresh를 사용하여 캐시 건너뛰기
캐시된 토큰을 건너뛰고 서버로 이동하려면 로그인/토큰 요청을 만드는 데 사용되는 `AuthenticationParameters` 개체에 부울 `forceRefresh`를 전달하세요. **경고:** 애플리케이션 성능에 영향을 미치므로 기본적으로 사용하지 않아야 합니다.  캐시를 사용하면 사용자에게 더 나은 환경을 제공하고 건너뛰는 것은 현재 캐시된 데이터에 최신 정보가 없는 시나리오에서만 사용해야 합니다.  예시: 업데이트된 역할이 있는 새 토큰을 가져와야 하는 사용자에 역할을 추가하는 관리 도구입니다.

## <a name="usage"></a>사용량
아래 예제에서는 사용자를 로그인하고 Microsoft의 Graph API에 사용할 토큰을 획득하는 방법을 안내합니다.

#### <a name="prerequisites"></a>사전 요구 사항

MSAL.js를 사용하기 전에 [Azure AD에 애플리케이션을 등록](https://docs.microsoft.com/azure/active-directory/develop/quickstart-register-app)하여 구성에 유효한 `clientId` 항목을 얻고 앱이 리디렉션 트래픽을 허용할 경로를 등록해야 합니다.

#### <a name="1-instantiate-the-useragentapplication"></a>1. UserAgentApplication 인스턴스화

`UserAgentApplication`은 [Wiki](https://github.com/AzureAD/microsoft-authentication-library-for-js/wiki/MSAL.js-1.0.0-api-release#configuration-options)에 자세히 설명된 다양한 옵션으로 구성할 수 있지만 유일한 필수 매개 변수는 `auth.clientId`입니다.

인스턴스를 인스턴스화한 후 MSAL 1.2.x 이하(`loginRedirect` 및 `acquireTokenRedirect`)에서 리디렉션 흐름을 사용하려는 경우 `handleRedirectCallback(authCallback)`(`authCallback = function(AuthError, AuthResponse)`)을 사용하여 콜백 처리기를 등록해야 합니다. MSAL 1.3.0을 기준으로 선택 사항입니다. 콜백 함수는 인증 요청이 성공적으로 완료되었거나 실패한 후에 호출됩니다. 이는 팝업 흐름이 약속을 반환하기 때문에 필요하지 않습니다.

```JavaScript
    import * as Msal from "msal";
    // if using cdn version, 'Msal' will be available in the global scope

    const msalConfig = {
        auth: {
            clientId: 'your_client_id'
        }
    };

    const msalInstance = new Msal.UserAgentApplication(msalConfig);

    msalInstance.handleRedirectCallback((error, response) => {
        // handle redirect response or error
    });

```

구성 옵션에 대한 자세한 내용은 [MSAL.js를 사용하여 클라이언트 애플리케이션 초기화](https://docs.microsoft.com/azure/active-directory/develop/msal-js-initializing-client-applications)를 참조하세요.

#### <a name="2-login-the-user"></a>2. 사용자 로그인

앱은 사용자 컨텍스트를 설정하기 위해 `loginPopup` 또는 `loginRedirect` 메서드를 사용하여 사용자를 로그인해야 합니다.

로그인 메서드가 호출되고 Azure AD 서비스에서 사용자 인증을 완료하면 몇 가지 기본 정보로 사용자를 식별하는 데 사용되는 [ID 토큰](https://docs.microsoft.com/azure/active-directory/develop/id-tokens)이 반환됩니다.

사용자를 로그인할 때 사용자가 로그인에 미리 동의할 수 있는 범위를 전달할 수 있지만 필수는 아닙니다. 로그인 시 범위에 동의하면 이러한 범위에 대한 access_token이 반환하지 않지만 사용자와의 추가 상호 작용 없이 전달된 범위로 토큰을 자동으로 가져올 수 있습니다.

필요한 경우에만 필요한 범위, 즉 동적 동의라는 개념을 요청하는 것이 가장 좋습니다. 이렇게 하면 애플리케이션에서 사용자에 대한 대화형 동의가 더 많이 생성될 수 있지만 아직 사용하지 않는 기능에 대한 많은 사용 권한 목록을 부여하는 것이 불안할 수 있는 사용자로부터의 반납도 줄어듭니다.

AAD 리소스 내에서 많은 범위를 요청할 수 있지만 한 번에 3개의 리소스에 대해서만 동의할 수 있습니다.
사용자가 로그인 요청을 할 때 AAD가 해당 범위에 동의하기 전에 idToken을 발급하기 때문에 여러 리소스 및 해당 범위를 전달할 수 있습니다. 그러나 acquireToken 호출은 하나의 리소스/여러 범위에 대해서만 유효합니다. 여러 리소스에 액세스해야 하는 경우 리소스당 별도의 acquireToken을 호출하세요.

```JavaScript
   var loginRequest = {
       scopes: ["user.read", "mail.send"] // optional Array<string>
   };

    msalInstance.loginPopup(loginRequest)
        .then(response => {
            // handle response
        })
        .catch(err => {
            // handle error
        });

```

##### <a name="ssosilent"></a>ssoSilent

사용자에게 기존 세션이 있고 상호 작용을 요청하지 않고 사용자 컨텍스트를 설정하려는 경우 `loginHint` 또는 `sid`([선택적 클레임](https://docs.microsoft.com/azure/active-directory/develop/active-directory-optional-claims)으로 사용 가능)를 사용하여 `ssoSilent`를 호출할 수 있으며 MSAL은 기존 세션에 대해 자동으로 SSO를 시도하고 사용자 컨텍스트를 설정합니다.

지정된 `loginHint` 또는 `sid` 세션에 대한 활성 세션이 없는 경우 대화형 로그인 메서드(`loginPopup` 또는 `loginRedirect`)를 호출하여 처리해야 하는 오류가 throw됩니다.

예:

```js
const ssoRequest = {
    loginHint: "user@example.com"
};

msalInstance.ssoSilent(ssoRequest)
    .then(response => {
        // session silently established
    })
    .catch(error => {
        // handle error by invoking an interactive login method
        msalInstance.loginPopup(ssoRequest);
    });
```

#### <a name="3-get-an-access-token-to-call-an-api"></a>텍스트가 포함된 액세스 토큰을 가져와서 API 호출

`acquireTokenSilent`를 사용하여 MSAL에서 앱이 호출해야 하는 API에 대한 액세스 토큰을 Azure AD에 자동으로 요청(UI를 사용하여 사용자에게 요청하지 않고)하여 액세스 토큰을 가져올 수 있습니다. 그런 다음 Azure AD 서비스는 앱이 안전하게 API를 호출할 수 있도록 사용자가 동의한 범위를 포함하는 [액세스 토큰](https://docs.microsoft.com/azure/active-directory/develop/access-tokens)을 반환합니다.

`acquireTokenRedirect` 또는 `acquireTokenPopup`을 사용하여 대화형 요청을 시작할 수 있지만 상호 작용 필수 오류로 인해 토큰을 자동으로 가져올 수 없는 경우에만 대화형 환경을 표시하는 것이 좋습니다. 대화형 토큰 호출을 사용하는 경우 애플리케이션에서 사용되는 로그인 방법과 일치해야 합니다. (`loginPopup`=> `acquireTokenPopup`, `loginRedirect` => `acquireTokenRedirect`).

`InteractionRequiredAuthError` 오류 유형이 발생하여 `acquireTokenSilent` 호출이 실패하는 경우 대화형 요청을 시작해야 합니다.  이는 해지된 범위, 만료된 토큰 또는 암호 변경을 포함하여 여러 가지 이유로 발생할 수 있습니다.

`acquireTokenSilent`는 캐시에서 유효한 토큰을 찾고 만료에 가깝거나 존재하지 않는 경우 자동으로 새로 고침을 시도합니다.

[요청 및 응답 데이터 형식](https://github.com/AzureAD/microsoft-authentication-library-for-js/wiki/MSAL.js-1.0.0-api-release#signing-in-and-getting-tokens-with-msaljs) 을 참조하세요.

```JavaScript
    // if the user is already logged in you can acquire a token
    if (msalInstance.getAccount()) {
        var tokenRequest = {
            scopes: ["user.read", "mail.send"]
        };
        msalInstance.acquireTokenSilent(tokenRequest)
            .then(response => {
                // get access token from response
                // response.accessToken
            })
            .catch(err => {
                // could also check if err instance of InteractionRequiredAuthError if you can import the class.
                if (err.name === "InteractionRequiredAuthError") {
                    return msalInstance.acquireTokenPopup(tokenRequest)
                        .then(response => {
                            // get access token from response
                            // response.accessToken
                        })
                        .catch(err => {
                            // handle error
                        });
                }
            });
    } else {
        // user is not logged in, you will need to log them in to acquire a token
    }
```

#### <a name="4-use-the-token-as-a-bearer-in-an-http-request-to-call-the-microsoft-graph-or-a-web-api"></a>4. HTTP 요청에서 토큰을 전달자로 사용하여 Microsoft Graph 또는 Web API를 호출합니다.

```JavaScript
    var headers = new Headers();
    var bearer = "Bearer " + token;
    headers.append("Authorization", bearer);
    var options = {
         method: "GET",
         headers: headers
    };
    var graphEndpoint = "https://graph.microsoft.com/v1.0/me";

    fetch(graphEndpoint, options)
        .then(resp => {
             //do something with response
        });
```

[MSAL Wiki](https://github.com/AzureAD/microsoft-authentication-library-for-js/wiki)에 설명된 MSAL.js 기능에 대한 자세한 내용을 알아보고 전체 [코드 샘플](https://github.com/AzureAD/microsoft-authentication-library-for-js/wiki/Samples)을 확인할 수 있습니다.

## <a name="security-reporting"></a>보안 보고

라이브러리 또는 서비스에 대한 보안 문제가 발견되면 가능한 한 자세하게 [secure@microsoft.com](mailto:secure@microsoft.com)에 신고해 주세요. 제출하면 [Microsoft 장려금](http://aka.ms/bugbounty) 프로그램을 통해 장려금을 받을 수 있습니다. GitHub Issues 또는 기타 퍼블릭 사이트에 보안 문제를 게시하지 마세요. 정보를 받는 즉시 연락드리겠습니다. [이 페이지](https://technet.microsoft.com/security/dd252948) 를 방문해서 보안 공지 경고를 구독하여 보안 사건이 발생할 때 알림을 받는 것이 좋습니다.

## <a name="license"></a>License

Copyright (c) Microsoft Corporation.  All rights reserved. MIT 라이선스(“라이선스”)에 따라 라이선스가 부여됨

## <a name="we-value-and-adhere-to-the-microsoft-open-source-code-of-conduct"></a>Microsoft 오픈 소스 사용 규정을 소중히 여기고 준수합니다.

이 프로젝트는 [Microsoft 오픈 소스 준수 사항](https://opensource.microsoft.com/codeofconduct/)을 채택했습니다. 자세한 내용은 [Code of Conduct FAQ](https://opensource.microsoft.com/codeofconduct/faq/)(준수 사항 FAQ)를 참조하거나 [opencode@microsoft.com](mailto:opencode@microsoft.com)에 추가 질문 또는 의견을 알려주세요.
