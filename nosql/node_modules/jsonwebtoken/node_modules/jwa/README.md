---
ms.openlocfilehash: 6aae1c88465791540ed5192f26e8f48b83eb2b47
ms.sourcegitcommit: e739004291428ce83f14b9d49f1e9dfaa3762dde
ms.translationtype: HT
ms.contentlocale: ko-KR
ms.lasthandoff: 02/05/2022
ms.locfileid: "138052426"
---
# <a name="node-jwa-build-statushttpstravis-ciorgbrianloveswordsnode-jwa"></a>node-jwa [![빌드 상태](https://travis-ci.org/brianloveswords/node-jwa.svg?branch=master)](https://travis-ci.org/brianloveswords/node-jwa)

[JSON 웹 서명](http://self-issued.info/docs/draft-ietf-jose-json-web-signature.html)에 필요한 알고리즘에 초점을 맞춘 [JSON 웹 알고리즘](http://tools.ietf.org/id/draft-ietf-jose-json-web-algorithms-08.html)을 구현합니다(이 시점에서만 해당).

이 라이브러리는 JWS에 대한 필수, 권장, 선택적 암호화 알고리즘을 모두 지원합니다.

alg 매개 변수 값 | 디지털 서명 또는 MAC 알고리즘
----------------|----------------------------
HS256 | SHA-256 해시 알고리즘을 사용하는 HMAC
HS384 | SHA-384 해시 알고리즘을 사용하는 HMAC
HS512 | SHA-512 해시 알고리즘을 사용하는 HMAC
RS256 | SHA-256 해시 알고리즘을 사용하는 RSASSA
RS384 | SHA-384 해시 알고리즘을 사용하는 RSASSA
RS512 | SHA-512 해시 알고리즘을 사용하는 RSASSA
PS256 | SHA-256 해시 알고리즘을 사용하는 RSASSA-PSS
PS384 | SHA-384 해시 알고리즘을 사용하는 RSASSA-PSS
PS512 | SHA-512 해시 알고리즘을 사용하는 RSASSA-PSS
ES256 | P-256 곡선 및 SHA-256 해시 알고리즘을 사용하는 ECDSA
ES384 | P-384 곡선 및 SHA-384 해시 알고리즘을 사용하는 ECDSA
ES512 | P-521 곡선 및 SHA-512 해시 알고리즘을 사용하는 ECDSA
없음 | 디지털 서명 또는 MAC 값이 포함되지 않음

PS*는 노드 6.12 이상(7.x 제외)에서만 작동합니다.

# <a name="requirements"></a>요구 사항

테스트를 실행하려면 최신 버전의 OpenSSL이 필요합니다. **OS X와 함께 제공되는 버전(OpenSSL 0.9.8r 2월 8일)
2011) 은 최신 버전이 아닙니다.** ECDSA 키를 완전히 지원하지 않기 때문입니다. 버전 1.0.0 이상을 사용해야 합니다. OpenSSL 1.0.1c 2012년 5월 10일에서 테스트했습니다.

# <a name="testing"></a>테스트

테스트를 실행하려면 다음을 수행합니다.

```bash
$ npm test
```

이렇게 하면 테스트에 사용할 많은 키페어가 생성됩니다. 새 키페어를 생성하려면 `npm test`를 다시 실행하기 전에 `make clean`을 수행합니다.

## <a name="methodology"></a>방법

OpenSSL 서명 → JS 확인 및 JS 서명 테스트를 위한 `openssl dgst -verify` → 각 RSA 및 ECDSA 알고리즘에 대한 OpenSSL 검증을 테스트하기 위해 `openssl dgst -sign`이 생성됩니다.

# <a name="usage"></a>사용량

## <a name="jwaalgorithm"></a>jwa(알고리즘)

알고리즘에 대한 `sign` 및 `verify` 메서드를 사용하여 새 `jwa` 개체를 만듭니다. 알고리즘의 유효한 값은 위의 표(`'HS256'`, `'HS384'` 등)에서 찾을 수 있으며 대/소문자를 구분하지 않습니다. 유효하지 않은 알고리즘 값을 전달하면 `TypeError`가 throw됩니다.


## <a name="jwasigninput-secretorprivatekey"></a>jwa#sign(입력, secretOrPrivateKey)

HMAC 알고리즘에 대한 비밀 또는 RSA 및 ECDSA 알고리즘에 대한 프라이빗 키를 사용하여 일부 입력에 서명합니다.

입력이 아직 문자열 또는 버퍼가 아닌 경우 강제 변환을 시도하기 위해 `JSON.stringify`가 호출됩니다.

HMAC 알고리즘의 경우 `secretOrPrivateKey`는 문자열 또는 버퍼여야 합니다. ECDSA 및 RSA의 경우 이 값은 PEM으로 인코딩된 **프라이빗** 키를 나타내는 문자열이어야 합니다.

출력 [base64url](http://en.wikipedia.org/wiki/Base64#URL_applications) 형식입니다. JWS에서 이 형식의 서명이 예상되므로 편의를 위해 사용됩니다. 애플리케이션에 다른 형식의 출력이 필요한 경우 [문제를 열어주세요](https://github.com/brianloveswords/node-jwa/issues). 그 동안 [brianloveswords/base64url](https://github.com/brianloveswords/base64url)을 사용하여 서명을 디코딩할 수 있습니다.

nodejs *v0.11.8* 을 기준으로 SPKAC 지원이 도입되었습니다. nodeJs 버전이 충족되면 `{ key: '..', passphrase: '...' }` 개체를 전달할 수 있습니다.


## <a name="jwaverifyinput-signature-secretorpublickey"></a>jwa#verify(입력, 서명, secretOrPublicKey)

서명을 확인합니다. `true` 또는 `false`을 반환합니다.

`signature`는 base64url로 인코딩된 문자열이어야 합니다.

HMAC 알고리즘의 경우 `secretOrPublicKey`는 문자열 또는 버퍼여야 합니다. ECDSA 및 RSA의 경우 이 값은 PEM으로 인코딩된 **퍼블릭** 키를 나타내는 문자열이어야 합니다.


# <a name="example"></a>예

HMAC
```js
const jwa = require('jwa');

const hmac = jwa('HS256');
const input = 'super important stuff';
const secret = 'shhhhhh';

const signature = hmac.sign(input, secret);
hmac.verify(input, signature, secret) // === true
hmac.verify(input, signature, 'trickery!') // === false
```

키 사용
```js
const fs = require('fs');
const jwa = require('jwa');
const privateKey = fs.readFileSync(__dirname + '/ecdsa-p521-private.pem');
const publicKey = fs.readFileSync(__dirname + '/ecdsa-p521-public.pem');

const ecdsa = jwa('ES512');
const input = 'very important stuff';

const signature = ecdsa.sign(input, privateKey);
ecdsa.verify(input, signature, publicKey) // === true
```
## <a name="license"></a>License

MIT

```
Copyright (c) 2013 Brian J. Brennan

Permission is hereby granted, free of charge, to any person obtaining a
copy of this software and associated documentation files (the
"Software"), to deal in the Software without restriction, including
without limitation the rights to use, copy, modify, merge, publish,
distribute, sublicense, and/or sell copies of the Software, and to
permit persons to whom the Software is furnished to do so, subject to
the following conditions:

The above copyright notice and this permission notice shall be included
in all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
```
