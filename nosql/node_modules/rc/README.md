---
ms.openlocfilehash: 4f70d9e1d8895757244ec8464f178ff3068a36bd
ms.sourcegitcommit: e739004291428ce83f14b9d49f1e9dfaa3762dde
ms.translationtype: HT
ms.contentlocale: ko-KR
ms.lasthandoff: 02/05/2022
ms.locfileid: "138052064"
---
# <a name="rc"></a>rc

지연 사용자에 대해 구성할 수 없는 구성 로더입니다.

## <a name="usage"></a>사용량

유일한 옵션은 앱 이름 및 기본 구성을 rc에 전달하는 것입니다.

```javascript
var conf = require('rc')(appname, {
  //defaults go here.
  port: 2468,

  //defaults which are objects will be merged, not replaced
  views: {
    engine: 'jade'
  }
});
```

`rc`는 지정한 기본값과 병합된 구성 옵션을 반환합니다.
미리 정의된 기본값 개체를 전달하면 다음과 같이 변경됩니다.

```javascript
var conf = {};
require('rc')(appname, conf);
```

`rc`에서 앱에 대한 구성 파일을 찾으면 반환된 구성 개체에는 해당 경로가 포함된 `configs` 배열이 포함됩니다.

```javascript
var appCfg = require('rc')(appname, conf);
appCfg.configs[0] // /etc/appnamerc
appCfg.configs[1] // /home/dominictarr/.config/appname
appCfg.config // same as appCfg.configs[appCfg.configs.length - 1]
```

## <a name="standards"></a>표준

애플리케이션 이름(`appname`)을 지정하면 rc는 구성에 대한 모든 명백한 위치를 확인합니다.

  * 명령줄 인수,  _미니리스트로 구문 분석(예: `--foo baz`, 중첩됨: `--foo.bar=baz`)_
  * 접두사가 `${appname}_`인 환경 변수
    * 또는 “\_\_”를 사용하여 중첩된 속성을 나타냅니다. <br/> _(예: `appname_foo__bar__baz` => `foo.bar.baz`)_
  * `--config file` 옵션을 전달한 경우 해당 파일에서
  * 로컬 `.${appname}rc` 또는 `./ ../ ../../ ../../../`에서 검색된 첫 번째 검색 등
  * `$HOME/.${appname}rc`
  * `$HOME/.${appname}/config`
  * `$HOME/.config/${appname}`
  * `$HOME/.config/${appname}/config`
  * `/etc/${appname}rc`
  * `/etc/${appname}/config`
  * 전달한 기본 개체입니다.

발견된 모든 구성 원본은 하나의 개체로 평면화되므로 이 목록의 **앞부분** 에 있는 원본이 나중에 재정의됩니다.


## <a name="configuration-file-formats"></a>구성 파일 형식

구성 파일(예: `.appnamerc`)은 [json](http://json.org/example) 또는 [ini](http://en.wikipedia.org/wiki/INI_file) 형식일 수 있습니다. 파일 확장명(`.json` 또는 `.ini`)은 사용하면 **안 됩니다**. 아래의 예제 구성은 동일합니다.


#### <a name="formatted-as-ini"></a>`ini`로 형식 지정

```
; You can include comments in `ini` format if you want.

dependsOn=0.10.0


; `rc` has built-in support for ini sections, see?

[commands]
  www     = ./commands/www
  console = ./commands/repl


; You can even do nested sections

[generators.options]
  engine  = ejs

[generators.modules]
  new     = generate-new
  engine  = generate-backend

```

#### <a name="formatted-as-json"></a>`json`으로 형식 지정

```javascript
{
  // You can even comment your JSON, if you want
  "dependsOn": "0.10.0",
  "commands": {
    "www": "./commands/www",
    "console": "./commands/repl"
  },
  "generators": {
    "options": {
      "engine": "ejs"
    },
    "modules": {
      "new": "generate-new",
      "backend": "generate-backend"
    }
  }
}
```

주석은 [strip-json-comments](https://github.com/sindresorhus/strip-json-comments)를 통해 JSON 구성에서 제거됩니다.

> ini 및 env 변수에는 형식에 대한 표준이 없으므로 애플리케이션에서 문자열을 준비해야 합니다.

부울 및 숫자의 문자열 표현이 항상 적절한 형식으로 변환되도록 하려면(엄격한 `===` 비교를 수행하려는 경우 특히 유용함) [parse-strings-in-object](https://github.com/anselanza/parse-strings-in-object)와 같은 모듈을 사용하여 rc에서 반환된 구성 개체를 래핑하는 것이 좋습니다.


## <a name="simple-example-demonstrating-precedence"></a>우선 순위를 보여 주기 위한 간단한 예제
다음과 같은 애플리케이션이 있다고 가정합니다(하드 코딩된 기본값이 rc에 전달됨).
```
const conf = require('rc')('myapp', {
    port: 12345,
    mode: 'test'
});

console.log(JSON.stringify(conf, null, 2));
```
다음과 같은 내용이 포함된 `config.json` 파일도 있습니다.
```
{
  "port": 9000,
  "foo": "from config json",
  "something": "else"
}
```
그리고 같은 폴더에 다음 내용이 포함된 파일 `.myapprc`:
```
{
  "port": "3001",
  "foo": "bar"
}
```
다양한 명령의 예상 출력은 다음과 같습니다.

`node .`
```
{
  "port": "3001",
  "mode": "test",
  "foo": "bar",
  "_": [],
  "configs": [
    "/Users/stephen/repos/conftest/.myapprc"
  ],
  "config": "/Users/stephen/repos/conftest/.myapprc"
}
```
하드 코딩된 개체의 기본값 `mode`는 유지되지만 포트는 `.myapprc` 파일(앱 이름 일치에 따라 자동으로 찾음)에 의해 재정의되고 `foo`가 추가됩니다.


`node . --foo baz`
```
{
  "port": "3001",
  "mode": "test",
  "foo": "baz",
  "_": [],
  "configs": [
    "/Users/stephen/repos/conftest/.myapprc"
  ],
  "config": "/Users/stephen/repos/conftest/.myapprc"
}
```
위의 결과와 같지만 명령줄 인수가 `.myapprc` 파일보다 우선하기 때문에 `foo`가 재정의됩니다.

`node . --foo barbar --config config.json`
```
{
  "port": 9000,
  "mode": "test",
  "foo": "barbar",
  "something": "else",
  "_": [],
  "config": "config.json",
  "configs": [
    "/Users/stephen/repos/conftest/.myapprc",
    "config.json"
  ]
}
```
이제 `port`는 지정된 `config.json` 파일(`.myapprc`에서 값 재정의)에서 가져온 값이며 `config.json` 파일에도 지정되어 있음에도 불구하고 명령줄에 의해 `foo` 값이 재정의됩니다.
 


## <a name="advanced-usage"></a>고급 사용 방법

#### <a name="pass-in-your-own-argv"></a>`argv` 직접 전달

`argv`를 세 번째 인수로 `rc`에 직접 전달할 수 있습니다.  [사용자 고유의 명령줄 옵트 파서](https://github.com/dominictarr/rc/pull/12)를 사용하려는 경우입니다.

```javascript
require('rc')(appname, defaults, customArgvParser);
```

## <a name="pass-in-your-own-parser"></a>사용자 고유의 파서 전달

비표준 파서가 특별히 필요한 경우 파서에서 4번째 인수로 전달하면 됩니다.
(기본 인수 파서 가져오기를 위해 3번째를 null로 둡니다.)

```javascript
require('rc')(appname, defaults, null, parser);
```

또한 엄격한 유효한 JSON과 같이 더 엄격한 형식을 강제 적용하는 데 사용할 수도 있습니다.

## <a name="note-on-performance"></a>성능에 대한 참고 사항

`rc`는 `fs.statSync`를 실행 중이므로 핫 코드 경로(예: 요청 처리기)에서 사용하지 않도록 합니다. 


## <a name="license"></a>License

두 절 BSD 라이선스, MIT 라이선스 또는 Apache 라이선스 버전 2.0에 따른 다중 라이선스
