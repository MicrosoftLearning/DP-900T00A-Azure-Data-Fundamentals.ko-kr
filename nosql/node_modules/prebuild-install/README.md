---
ms.openlocfilehash: 50690c00791b1f6ca1d585c1fb653f0ec4794578
ms.sourcegitcommit: e739004291428ce83f14b9d49f1e9dfaa3762dde
ms.translationtype: HT
ms.contentlocale: ko-KR
ms.lasthandoff: 02/05/2022
ms.locfileid: "138052658"
---
# <a name="prebuild-install"></a>prebuild-install

> **특정 플랫폼에 여러 버전의 Node.js & Electron용 미리 빌드된 이진 파일을 쉽게 설치하는 명령줄 도구입니다.**
> 기본적으로 GitHub 릴리스에서 미리 빌드된 이진 파일을 다운로드합니다.

[![npm](https://img.shields.io/npm/v/prebuild-install.svg)](https://www.npmjs.com/package/prebuild-install)
![Node 버전](https://img.shields.io/node/v/prebuild-install.svg)
[![테스트](https://github.com/prebuild/prebuild-install/actions/workflows/test.yml/badge.svg)](https://github.com/prebuild/prebuild-install/actions/workflows/test.yml)
[![david](https://david-dm.org/prebuild/prebuild-install.svg)](https://david-dm.org/prebuild/prebuild-install)
[![js-standard-style](https://img.shields.io/badge/code%20style-standard-brightgreen.svg)](http://standardjs.com/)

## <a name="note"></a>참고

**[`prebuild`](https://github.com/prebuild/prebuild)와 [`prebuild-install`](https://github.com/prebuild/prebuild-install)을 함께 사용하는 대신 [`prebuildify`](https://github.com/prebuild/prebuildify)를 [`node-gyp-build`](https://github.com/prebuild/node-gyp-build)와 함께 사용하는 것이 좋습니다.**

`prebuildify`를 사용하면 미리 빌드된 모든 이진 파일이 npm에 게시된 패키지 내에 배송되므로 `prebuild`에서와 같이 별도의 다운로드 단계가 필요하지 않습니다. 이 방법의 아이러니는 미리 빌드된 단일 이진 파일을 설치 스크립트로 다운로드하는 것보다 번들로 제공되는 모든 플랫폼에 대해 미리 빌드된 이진 파일을 모두 다운로드하는 것이 더 빠르다는 것입니다.

거꾸로:

1. 추가 다운로드 단계가 없으므로 더 안정적이고 빠르게 설치할 수 있습니다.
2. 런타임 버전을 로컬로 변경하고 Node.js 및 Electron 간에 동일한 설치를 사용할 수 있습니다. 미리 빌드된 모든 이진 파일이 npm tarball에 있고 올바른 이진 파일이 런타임에 선택되기 때문에 다시 설치하거나 다시 빌드할 필요가 없습니다.
3. `node-gyp-build` 런타임 종속성은 종속성이 없으며 종속성을 도입하면 설치 시간이 짧아지므로 원칙에 따라 유지됩니다.
4. 미리 빌드된 이진 파일은 npm 설치 스크립트를 사용하지 않도록 설정된 경우에도 작동합니다.
5. npm 패키지 체크섬은 미리 빌드된 이진 파일도 다룹니다.

단점:

1. 설치된 npm 패키지는 디스크에서 더 큽니다. Node-API 이진 파일은 런타임에 구애받지 않으며 앞으로 호환되기 때문에 [Node-API](https://nodejs.org/api/n-api.html)를 사용하면 이 작업이 완화됩니다.
2. 게시는 약간 더 복잡합니다. 미리 빌드된 이진 파일(일반적으로 CI)을 컴파일하고 페치한 후에 `npm publish`를 수행해야 하기 때문입니다.

## <a name="usage"></a>사용량

[`prebuild`](https://github.com/prebuild/prebuild)를 사용하여 미리 빌드된 이진 파일을 만들고 업로드합니다. 그런 다음, package.json 설치 스크립트를 다음으로 변경합니다.

```json
{
  "scripts": {
    "install": "prebuild-install || node-gyp rebuild"
  }
}
```

### <a name="help"></a>도움말

```
prebuild-install [options]

  --download    -d  [url]       (download prebuilds, no url means github)
  --target      -t  version     (version to install for)
  --runtime     -r  runtime     (Node runtime [node, napi or electron] to build or install for, default is node)
  --path        -p  path        (make a prebuild-install here)
  --token       -T  gh-token    (github token for private repos)
  --arch            arch        (target CPU architecture, see Node OS module docs, default is current arch)
  --platform        platform    (target platform, see Node OS module docs, default is current platform)
  --tag-prefix <prefix>         (github tag prefix, default is "v")
  --build-from-source           (skip prebuild download)
  --verbose                     (log verbosely)
  --libc                        (use provided libc rather than system default)
  --debug                       (set Debug or Release configuration)
  --version                     (print prebuild-install version and exit)
```

`npm` 스크립트를 통해 `prebuild-install`을 실행하는 경우 `npm` 명령에 지정된 인수를 통해 `--build-from-source`, `--debug`, `--download`, `--target`, `--runtime`, `--arch`, `--platform` 옵션이 전달될 수 있습니다.

또는 환경 변수 `npm_config_build_from_source=true`, `npm_config_platform`, `npm_config_arch`, `npm_config_target`, `npm_config_runtime`을 설정할 수 있습니다.

### <a name="private-repositories"></a>프라이빗 리포지토리

`prebuild-install`에서는 `-T <github-token>`을 사용하여 프라이빗 GitHub 리포지토리에서 사전 빌드 다운로드를 지원합니다.

```
$ prebuild-install -T <github-token>
```

cli에서 토큰을 사용하지 않으려면 `~/.prebuild-installrc`에 넣을 수 있습니다.

```
token=<github-token>
```

또는 `prebuild-install_token` 환경 변수에서 지정할 수 있습니다.

GitHub 토큰을 사용하면 API를 사용하여 올바른 릴리스를 확인할 수 있습니다. 즉, ([GitHub 속도 제한](https://developer.github.com/v3/rate_limit/))이 적용됩니다.

### <a name="create-github-token"></a>GitHub 토큰 만들기

토큰을 만들려면 다음을 수행합니다.

- [이 페이지](https://github.com/settings/tokens)로 이동
- `Generate new token` 단추를 클릭합니다.
- 토큰에 이름을 지정하고 `Generate token` 단추를 클릭합니다. 아래를 참조하세요.

![prebuild-token](https://cloud.githubusercontent.com/assets/13285808/20844584/d0b85268-b8c0-11e6-8b08-2b19522165a9.png)

기본 범위는 괜찮을 것입니다.

### <a name="custom-binaries"></a>사용자 지정 이진 파일

최종 사용자는 .npmrc 파일의 환경 변수를 통해 이진 다운로드 위치를 재정의할 수 있습니다.
변수는 `% your package name %_binary_host` 또는 `% your package name %_binary_host_mirror` 마스크를 충족해야 합니다. 예를 들면 다음과 같습니다.

```
leveldown_binary_host=http://overriden-host.com/overriden-path
```

패키지 버전 하위 경로 및 파일 이름은 계속 추가됩니다.
따라서 `leveldown@1.2.3`을 설치하는 경우 결과 URL은 다음과 같습니다.

```
http://overriden-host.com/overriden-path/v1.2.3/leveldown-v1.2.3-node-v57-win32-x64.tar.gz
```

#### <a name="local-prebuilds"></a>로컬 사전 빌드

로컬 파일 시스템의 사전 빌드를 사용하려는 경우 `% your package name %_local_prebuilds` .npmrc 변수를 사용하여 사전 빌드가 포함된 폴더에 대한 경로를 설정할 수 있습니다. 예를 들면 다음과 같습니다.

```
leveldown_local_prebuilds=/path/to/prebuilds
```

이 옵션은 해당 폴더에서 `prebuild`로 생성된 번들을 직접 찾습니다. 예를 들면 다음과 같습니다.

```
/path/to/prebuilds/leveldown-v1.2.3-node-v57-win32-x64.tar.gz
```

절대 경로가 아닌 경로는 사전 빌드 설치를 호출하는 패키지의 디렉터리를 기준으로 확인됩니다(예: 중첩된 종속성).

### <a name="cache"></a>캐시

미리 빌드된 모든 이진 파일은 트래픽을 최소화하기 위해 캐시됩니다. 따라서 먼저 `prebuild-install`은 캐시에서 이진 파일을 선택하고 이진 파일을 찾을 수 없는 경우 다운로드됩니다. 환경에 따라 캐시 폴더는 다음 순서로 결정됩니다.

- `${npm_config_cache}/_prebuilds`
- `${APP_DATA}/npm-cache/_prebuilds`
- `${HOME}/.npm/_prebuilds`

## <a name="license"></a>License

MIT
