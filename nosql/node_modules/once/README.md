---
ms.openlocfilehash: 69b0a9165715c6cd0e8de37ddb4abad94de2b102
ms.sourcegitcommit: e739004291428ce83f14b9d49f1e9dfaa3762dde
ms.translationtype: HT
ms.contentlocale: ko-KR
ms.lasthandoff: 02/05/2022
ms.locfileid: "138052069"
---
# <a name="once"></a>once

함수를 한 번만 호출합니다.

## <a name="usage"></a>usage

```javascript
var once = require('once')

function load (file, cb) {
  cb = once(cb)
  loader.load('file')
  loader.once('load', cb)
  loader.once('error', cb)
}
```

또는 책임 있는 방식으로 Function.prototype에 추가합니다.

```javascript
// only has to be done once
require('once').proto()

function load (file, cb) {
  cb = cb.once()
  loader.load('file')
  loader.once('load', cb)
  loader.once('error', cb)
}
```

아이러니하게도 프로토타입 기능은 이 모듈을 필요에 따라 두 배 더 복잡하게 만듭니다.

함수가 호출되었는지 확인하려면 `fn.called`를 사용합니다. 함수가 처음 호출되면 원래 함수의 반환 값이 `fn.value`에 저장되고 후속 호출은 이 값을 계속 반환합니다.

```javascript
var once = require('once')

function load (cb) {
  cb = once(cb)
  var stream = createStream()
  stream.once('data', cb)
  stream.once('end', function () {
    if (!cb.called) cb(new Error('not found'))
  })
}
```

## `once.strict(func)`

함수가 두 번 호출되면 오류를 throw합니다.

일부 함수는 한 번만 호출되어야 합니다. `once`를 사용하면 논리적 오류가 숨겨질 수 있습니다.

아래 예제에서 `greet` 함수는 콜백을 한 번만 호출해야 합니다.

```javascript
function greet (name, cb) {
  // return is missing from the if statement
  // when no name is passed, the callback is called twice
  if (!name) cb('Hello anonymous')
  cb('Hello ' + name)
}

function log (msg) {
  console.log(msg)
}

// this will print 'Hello anonymous' but the logical error will be missed
greet(null, once(msg))

// once.strict will print 'Hello anonymous' and throw an error when the callback will be called the second time
greet(null, once.strict(msg))
```
