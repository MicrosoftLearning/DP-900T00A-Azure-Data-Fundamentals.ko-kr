---
ms.openlocfilehash: 34b661fbb1237d51bdab932626d19518225841a0
ms.sourcegitcommit: e739004291428ce83f14b9d49f1e9dfaa3762dde
ms.translationtype: HT
ms.contentlocale: ko-KR
ms.lasthandoff: 02/05/2022
ms.locfileid: "138052913"
---
<a name="are-we-there-yet"></a>are-we-there-yet
----------------

비동기 작업 완료 상태의 복잡한 계층 구조를 추적합니다.  이는 대규모 재귀 팬아웃의 진행 상황을 기록하고 보고하는 방법을 제공하고 비동기에서 매우 일반적인 형식 워크플로를 수집하기 위한 것입니다.

이 완료 데이터로 수행하는 작업은 사용자에게 달려 있지만 가장 일반적인 사용 사례는 많은 진행률 표시줄 모듈 중 하나에 피드하는 것입니다.

대부분의 진행률 표시줄 모듈에는 이 버전이 포함되어 있지만 요구 사항이 더 복잡했습니다.

<a name="usage"></a>사용량
=====

```javascript
var TrackerGroup = require("are-we-there-yet").TrackerGroup

var top = new TrackerGroup("program")

var single = top.newItem("one thing", 100)
single.completeWork(20)

console.log(top.completed()) // 0.2

fs.stat("file", function(er, stat) {
  if (er) throw er  
  var stream = top.newStream("file", stat.size)
  console.log(top.completed()) // now 0.1 as single is 50% of the job and is 20% complete
                              // and 50% * 20% == 10%
  fs.createReadStream("file").pipe(stream).on("data", function (chunk) {
    // do stuff with chunk
  })
  top.on("change", function (name) {
    // called each time a chunk is read from "file"
    // top.completed() will start at 0.1 and fill up to 0.6 as the file is read
  })
})
```

<a name="shared-methods"></a>공유 메서드
==============

* var completed = tracker.completed()

구현 버전: `Tracker`, `TrackerGroup`, `TrackerStream`

완료된 작업의 완료 비율을 반환합니다. 0에서 1까지의 범위입니다.

* tracker.finish()

구현 버전: `Tracker`, `TrackerGroup`

추적기를 완료된 것으로 표시합니다. TrackerGroup을 사용하면 모든 구성 요소가 완료된 것으로 표시됩니다.

이 추적기의 모든 구성 요소를 완료된 것으로 표시합니다. 즉, 이제 이에 대한 `tracker.completed()`는 1이 됩니다.

이로 인해 하나 이상의 `change` 이벤트가 내보내질 수 있습니다.

<a name="events"></a>이벤트
======

모든 추적기 개체는 다음 인수를 사용하여 `change` 이벤트를 내보냅니다.

```
function (name, completed, tracker)
```

`name`은 원래 이벤트를 내보낸 추적기의 이름이거나, 이벤트를 내보낸 추적기 그룹이 없는 경우 첫 번째 포함 추적기 그룹입니다.

`completed`는 완료율(`tracker.completed()` 메서드에서 반환됨)입니다.

`tracker`는 이벤트를 수신 대기하는 추적기 개체입니다.

<a name="trackergroup"></a>TrackerGroup
============

* var 추적기 = 새 TrackerGroup(**이름**)

  * **name**(선택 사항) - 구성 요소 업데이트에 이름이 없는 경우 변경 알림에 사용되는 이 추적기 그룹의 이름입니다. 기본값은 정의되지 않음입니다.

빈 추적기 집계 그룹을 새로 만듭니다. 다른 추적기의 완료 상태에 따라 완료 상태가 결정되는 추적기입니다.

* tracker.addUnit(**otherTracker**, **weight**)

  * **otherTracker** - 다른 모든 항목은 아직 추적기 개체입니다.
  * **weight**(선택 사항) - 추적기를 제공할 가중치로, 기본값은 1입니다.

이 집계 그룹에 **otherTracker** 를 추가합니다. 가중치는 이 추적기가 다른 단위에 비례하여 완료되는 데 걸리는 시간을 결정합니다.  예를 들어 가중치가 1인 추적기 하나를 추가하고 가중치가 2인 추적기를 추가하면 두 번째 추적기가 첫 번째 추적기보다 두 배 더 오래 걸립니다.  따라서 첫 번째 추적기는 이 추적기 완료의 33%를 차지하고 두 번째 추적기는 나머지 67%를 차지합니다.

**otherTracker** 를 반환합니다.

* var subGroup = tracker.newGroup(**name**, **weight**)

위의 내용은 다음과 정확히 동일합니다.

```javascript
  var subGroup = tracker.addUnit(new TrackerGroup(name), weight)
```

* var subItem = tracker.newItem(**name**, **todo**, **weight**)

위의 내용은 다음과 정확히 동일합니다.

```javascript
  var subItem = tracker.addUnit(new Tracker(name, todo), weight)
```

* var subStream = tracker.newStream(**name**, **todo**, **weight**)

위의 내용은 다음과 정확히 동일합니다.

```javascript
  var subStream = tracker.addUnit(new TrackerStream(name, todo), weight)
```

* console.log( tracker.debug() )

모든 자식을 재귀적으로 입력하는 것을 포함하여 이 추적기 그룹 및 모든 자식의 완료를 보여 주는 트리를 반환합니다.

<a name="tracker"></a>Tracker
=======

* var tracker = new Tracker(**name**, **todo**)

  * **name** *(선택 사항)* 변경 이벤트에 보고할 이 카운터의 이름입니다.  기본값은 정의되지 않음입니다.
  * **todo**(선택 사항) 작업 할 일의 양(숫자)입니다. 기본값은 0입니다.

일반적으로 이들은 추적기 그룹의 일부로 구성됩니다(`newItem`을 통해).

* var completed = tracker.completed()

완료된 작업의 완료 비율을 반환합니다. 0에서 1까지의 범위입니다. 수행할 총 작업이 0이면 0을 반환합니다.

* tracker.addWork(**todo**)

  * **todo** 수행할 작업량에 추가할 숫자입니다.

수행할 작업의 양을 늘려 완료율을 줄입니다.  `change` 이벤트를 트리거합니다.

* tracker.completeWork(**completed**)

  * **completed** 완료된 작업에 추가할 숫자

완료된 작업의 양을 늘려 완료율을 높입니다.
할 일의 양을 지나서 완료된 작업을 늘리지 않습니다. 즉, 100%를 넘는 백분율은 허용되지 않습니다. `change` 이벤트를 트리거합니다.

* tracker.finish()

이 추적기를 완료된 것으로 표시합니다. tracker.completed()는 이제 1이 됩니다. `change` 이벤트를 트리거합니다.

<a name="trackerstream"></a>TrackerStream
=============

* var tracker = new TrackerStream(**name**, **size**, **options**)

  * **name**(선택 사항) 변경 이벤트에 보고할 이 카운터의 이름입니다.  기본값은 정의되지 않음입니다.
  * **size**(선택 사항) 이 스트림을 통해 전송되는 바이트 수입니다.
  * **options**(선택 사항) 스트림 옵션의 해시

추적기 스트림 개체는 블록이 통과할 때마다 내부 추적기 개체를 업데이트하는 통과 스트림입니다.  다운로드, 파일 추출, 기타 관련 활동을 추적하기 위한 것입니다. 데이터 원본을 파이핑한 다음, 데이터 원본으로 사용하여 사용합니다.

데이터에 길이 특성이 있는 경우 청크가 통과될 때 완료된 작업량으로 사용됩니다.  그렇지 않은 경우(예: 개체 스트림) 각 청크는 1개의 작업 단위를 완료하는 것으로 계산되므로 크기는 스트리밍되는 총 개체 수여야 합니다.

* tracker.addWork(**todo**)

  * **todo** 예상되는 전체 크기를 **todo** 바이트 단위로 늘입니다.

수행할 작업의 양을 늘려 완료율을 줄입니다.  `change` 이벤트를 트리거합니다.
